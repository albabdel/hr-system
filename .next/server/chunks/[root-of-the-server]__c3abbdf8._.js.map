{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/db.ts"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst MONGODB_URI = process.env.MONGODB_URI!;\nif (!MONGODB_URI) throw new Error(\"MONGODB_URI missing\");\n\nlet conn = global as unknown as { mongoose: { conn: typeof mongoose | null; promise: Promise<typeof mongoose> | null } };\nif (!conn.mongoose) conn.mongoose = { conn: null, promise: null };\n\nexport async function dbConnect() {\n  if (conn.mongoose.conn) return conn.mongoose.conn;\n  if (!conn.mongoose.promise) {\n    conn.mongoose.promise = mongoose.connect(MONGODB_URI, { dbName: \"vrs\" });\n  }\n  conn.mongoose.conn = await conn.mongoose.promise;\n  return conn.mongoose.conn;\n}\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAC3C,IAAI,CAAC,aAAa,MAAM,IAAI,MAAM;AAElC,IAAI,OAAO;AACX,IAAI,CAAC,KAAK,QAAQ,EAAE,KAAK,QAAQ,GAAG;IAAE,MAAM;IAAM,SAAS;AAAK;AAEzD,eAAe;IACpB,IAAI,KAAK,QAAQ,CAAC,IAAI,EAAE,OAAO,KAAK,QAAQ,CAAC,IAAI;IACjD,IAAI,CAAC,KAAK,QAAQ,CAAC,OAAO,EAAE;QAC1B,KAAK,QAAQ,CAAC,OAAO,GAAG,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC,aAAa;YAAE,QAAQ;QAAM;IACxE;IACA,KAAK,QAAQ,CAAC,IAAI,GAAG,MAAM,KAAK,QAAQ,CAAC,OAAO;IAChD,OAAO,KAAK,QAAQ,CAAC,IAAI;AAC3B","debugId":null}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/models/Employee.ts"],"sourcesContent":["import { Schema, model, models } from \"mongoose\";\nconst EmployeeSchema = new Schema({\n  tenantId: { type: String, index: true, required: true },\n  firstName: String,\n  lastName: String,\n  email: { type: String, index: true },\n  department: String,\n  position: String,\n  hireDate: Date,\n  managerId: { type: Schema.Types.ObjectId, ref: \"Employee\" },\n  documents: [{ name: String, url: String }],\n},{ timestamps: true });\nEmployeeSchema.index({ tenantId: 1, email: 1 });\nexport default models.Employee || model(\"Employee\", EmployeeSchema);\n"],"names":[],"mappings":";;;AAAA;;AACA,MAAM,iBAAiB,IAAI,yGAAA,CAAA,SAAM,CAAC;IAChC,UAAU;QAAE,MAAM;QAAQ,OAAO;QAAM,UAAU;IAAK;IACtD,WAAW;IACX,UAAU;IACV,OAAO;QAAE,MAAM;QAAQ,OAAO;IAAK;IACnC,YAAY;IACZ,UAAU;IACV,UAAU;IACV,WAAW;QAAE,MAAM,yGAAA,CAAA,SAAM,CAAC,KAAK,CAAC,QAAQ;QAAE,KAAK;IAAW;IAC1D,WAAW;QAAC;YAAE,MAAM;YAAQ,KAAK;QAAO;KAAE;AAC5C,GAAE;IAAE,YAAY;AAAK;AACrB,eAAe,KAAK,CAAC;IAAE,UAAU;IAAG,OAAO;AAAE;uCAC9B,yGAAA,CAAA,SAAM,CAAC,QAAQ,IAAI,CAAA,GAAA,yGAAA,CAAA,QAAK,AAAD,EAAE,YAAY","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/jwt.ts"],"sourcesContent":["import jwt from \"jsonwebtoken\";\nconst SECRET = process.env.JWT_SECRET!;\nexport function signJwt(payload: object, expiresIn = \"1d\") {\n  return jwt.sign(payload, SECRET, { expiresIn });\n}\nexport function verifyJwt<T = any>(token: string) {\n  return jwt.verify(token, SECRET) as T;\n}\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU;AAC9B,SAAS,QAAQ,OAAe,EAAE,YAAY,IAAI;IACvD,OAAO,uIAAA,CAAA,UAAG,CAAC,IAAI,CAAC,SAAS,QAAQ;QAAE;IAAU;AAC/C;AACO,SAAS,UAAmB,KAAa;IAC9C,OAAO,uIAAA,CAAA,UAAG,CAAC,MAAM,CAAC,OAAO;AAC3B","debugId":null}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/auth.ts"],"sourcesContent":["import { cookies } from \"next/headers\";\nimport { verifyJwt } from \"./jwt\";\n\nexport type Session = { userId: string; tenantId: string; role: \"OWNER\"|\"HR_ADMIN\"|\"MANAGER\"|\"EMPLOYEE\" };\nexport function getSession(): Session | null {\n  const token = cookies().get(\"vrs_token\")?.value;\n  if (!token) return null;\n  try { return verifyJwt<Session>(token); } catch { return null; }\n}\nexport function requireRole(session: Session | null, roles: Session[\"role\"][]) {\n  if (!session || !roles.includes(session.role)) throw new Error(\"Forbidden\");\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,SAAS;IACd,MAAM,QAAQ,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD,IAAI,GAAG,CAAC,cAAc;IAC1C,IAAI,CAAC,OAAO,OAAO;IACnB,IAAI;QAAE,OAAO,CAAA,GAAA,mHAAA,CAAA,YAAS,AAAD,EAAW;IAAQ,EAAE,OAAM;QAAE,OAAO;IAAM;AACjE;AACO,SAAS,YAAY,OAAuB,EAAE,KAAwB;IAC3E,IAAI,CAAC,WAAW,CAAC,MAAM,QAAQ,CAAC,QAAQ,IAAI,GAAG,MAAM,IAAI,MAAM;AACjE","debugId":null}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/employees/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { dbConnect } from \"@/lib/db\";\nimport Employee from \"@/models/Employee\";\nimport { getSession } from \"@/lib/auth\";\n\nexport async function GET() {\n  await dbConnect();\n  const session = getSession();\n  if (!session) return NextResponse.json({ error: { message: \"Unauthorized\" } }, { status: 401 });\n\n  const list = await Employee.find({ tenantId: session.tenantId }).sort({ createdAt: -1 }).limit(200);\n  return NextResponse.json(list);\n}\n\nexport async function POST(req: NextRequest) {\n  await dbConnect();\n  const session = getSession();\n  if (!session) return NextResponse.json({ error: { message: \"Unauthorized\" } }, { status: 401 });\n\n  const body = await req.json();\n  const doc = await Employee.create({ ...body, tenantId: session.tenantId });\n  return NextResponse.json(doc, { status: 201 });\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe;IACpB,MAAM,CAAA,GAAA,kHAAA,CAAA,YAAS,AAAD;IACd,MAAM,UAAU,CAAA,GAAA,oHAAA,CAAA,aAAU,AAAD;IACzB,IAAI,CAAC,SAAS,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,OAAO;YAAE,SAAS;QAAe;IAAE,GAAG;QAAE,QAAQ;IAAI;IAE7F,MAAM,OAAO,MAAM,2HAAA,CAAA,UAAQ,CAAC,IAAI,CAAC;QAAE,UAAU,QAAQ,QAAQ;IAAC,GAAG,IAAI,CAAC;QAAE,WAAW,CAAC;IAAE,GAAG,KAAK,CAAC;IAC/F,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;AAC3B;AAEO,eAAe,KAAK,GAAgB;IACzC,MAAM,CAAA,GAAA,kHAAA,CAAA,YAAS,AAAD;IACd,MAAM,UAAU,CAAA,GAAA,oHAAA,CAAA,aAAU,AAAD;IACzB,IAAI,CAAC,SAAS,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,OAAO;YAAE,SAAS;QAAe;IAAE,GAAG;QAAE,QAAQ;IAAI;IAE7F,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,MAAM,MAAM,MAAM,2HAAA,CAAA,UAAQ,CAAC,MAAM,CAAC;QAAE,GAAG,IAAI;QAAE,UAAU,QAAQ,QAAQ;IAAC;IACxE,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,KAAK;QAAE,QAAQ;IAAI;AAC9C","debugId":null}}]
}